
[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/mark/projects/daatan[39m

 [31mâ¯[39m __tests__/api/predictions-resolve.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m src/app/forecasts/express/__tests__/ExpressPredictionClient.test.tsx [2m([22m[2m0 test[22m[2m)[22m
 [32mâœ“[39m src/components/forecasts/__tests__/PredictionCard.moderation.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 409[2mms[22m[39m
[90mstderr[2m | src/app/__tests__/page.test.tsx[2m > [22m[2mFeedPage[2m > [22m[2mrenders loading state initially
[22m[39mWarning: An update to FeedClient inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at FeedClient (/home/mark/projects/daatan/src/app/FeedClient.tsx:14:75)
Warning: An update to FeedClient inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at FeedClient (/home/mark/projects/daatan/src/app/FeedClient.tsx:14:75)
Warning: An update to FeedClient inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at FeedClient (/home/mark/projects/daatan/src/app/FeedClient.tsx:14:75)

 [32mâœ“[39m src/app/__tests__/page.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 397[2mms[22m[39m
 [32mâœ“[39m src/components/__tests__/Sidebar.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 842[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders sign in button when unauthenticated [33m 506[2mms[22m[39m
 [32mâœ“[39m src/components/forecasts/__tests__/PredictionWizard.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 689[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders with empty form by default [33m 314[2mms[22m[39m
[90mstderr[2m | __tests__/api/leaderboard.test.ts[2m > [22m[2mLeaderboard API[2m > [22m[2mhandles database errors gracefully
[22m[39mFailed to fetch leaderboard Error: DB Error
    at [90m/home/mark/projects/daatan/[39m__tests__/api/leaderboard.test.ts:49:48
    at [90mfile:///home/mark/projects/daatan/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///home/mark/projects/daatan/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///home/mark/projects/daatan/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///home/mark/projects/daatan/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///home/mark/projects/daatan/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///home/mark/projects/daatan/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///home/mark/projects/daatan/[39mnode_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m
    at runTest [90m(file:///home/mark/projects/daatan/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:12[90m)[39m

 [32mâœ“[39m __tests__/api/leaderboard.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 184[2mms[22m[39m
 [32mâœ“[39m src/app/auth/error/__tests__/page.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[33m 314[2mms[22m[39m
 [32mâœ“[39m __tests__/api/system-version.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 31[2mms[22m[39m
 [32mâœ“[39m src/app/forecasts/[id]/__tests__/ModeratorResolutionSection.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 248[2mms[22m[39m
 [32mâœ“[39m src/components/forecasts/__tests__/ResolutionForm.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 3985[2mms[22m[39m
     [33m[2mâœ“[22m[39m renders outcome options and submit button [33m 1564[2mms[22m[39m
     [33m[2mâœ“[22m[39m calls resolve API on submit with correct outcome [33m 518[2mms[22m[39m
     [33m[2mâœ“[22m[39m calls onResolved callback when resolution succeeds [33m 655[2mms[22m[39m
     [33m[2mâœ“[22m[39m sends selected outcome when different option chosen [33m 471[2mms[22m[39m
     [33m[2mâœ“[22m[39m displays error when API returns non-ok [33m 408[2mms[22m[39m
     [33m[2mâœ“[22m[39m includes evidence links when provided [33m 362[2mms[22m[39m
 [32mâœ“[39m __tests__/api/comments.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 96[2mms[22m[39m
 [32mâœ“[39m src/components/__tests__/RoleBadge.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 136[2mms[22m[39m
 [32mâœ“[39m __tests__/properties/commitment-properties.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 62[2mms[22m[39m
 [32mâœ“[39m src/lib/llm/__tests__/gemini.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 7[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Suites 2 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m __tests__/api/predictions-resolve.test.ts[2m [ __tests__/api/predictions-resolve.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "@/app/api/predictions/[id]/resolve/route" from "__tests__/api/predictions-resolve.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36m/home/mark/projects/daatan/__tests__/api/predictions-resolve.test.ts[39m:3:0
[33m  35 |  }));
  36 |  const __vi_import_0__ = await import("next/server");
  37 |  const __vi_import_1__ = await import("@/app/api/predictions/[id]/resolve/route");
     |                                       ^
  38 |  import { describe, it, expect, vi, beforeEach } from "vitest";
  39 |  [39m
[90m [2mâ¯[22m TransformPluginContext._formatLog node_modules/vite/dist/node/chunks/config.js:[2m28999:43[22m[39m
[90m [2mâ¯[22m TransformPluginContext.error node_modules/vite/dist/node/chunks/config.js:[2m28996:14[22m[39m
[90m [2mâ¯[22m normalizeUrl node_modules/vite/dist/node/chunks/config.js:[2m27119:18[22m[39m
[90m [2mâ¯[22m node_modules/vite/dist/node/chunks/config.js:[2m27177:32[22m[39m
[90m [2mâ¯[22m TransformPluginContext.transform node_modules/vite/dist/node/chunks/config.js:[2m27145:4[22m[39m
[90m [2mâ¯[22m EnvironmentPluginContainer.transform node_modules/vite/dist/node/chunks/config.js:[2m28797:14[22m[39m
[90m [2mâ¯[22m loadAndTransform node_modules/vite/dist/node/chunks/config.js:[2m22670:26[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯[22m[39m

[41m[1m FAIL [22m[49m src/app/forecasts/express/__tests__/ExpressPredictionClient.test.tsx[2m [ src/app/forecasts/express/__tests__/ExpressPredictionClient.test.tsx ][22m
[31m[1mError[22m: Failed to resolve import "../ExpressPredictionClient" from "src/app/forecasts/express/__tests__/ExpressPredictionClient.test.tsx". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36m/home/mark/projects/daatan/src/app/forecasts/express/__tests__/ExpressPredictionClient.test.tsx[39m:3:0
[33m  6  |  const __vi_import_0__ = await import("react/jsx-dev-runtime");
  7  |  const __vi_import_1__ = await import("@testing-library/react");
  8  |  const __vi_import_2__ = await import("../ExpressPredictionClient");
     |                                       ^
  9  |  
  10 |  import { describe, it, expect, vi, beforeEach } from "vitest";[39m
[90m [2mâ¯[22m TransformPluginContext._formatLog node_modules/vite/dist/node/chunks/config.js:[2m28999:43[22m[39m
[90m [2mâ¯[22m TransformPluginContext.error node_modules/vite/dist/node/chunks/config.js:[2m28996:14[22m[39m
[90m [2mâ¯[22m normalizeUrl node_modules/vite/dist/node/chunks/config.js:[2m27119:18[22m[39m
[90m [2mâ¯[22m node_modules/vite/dist/node/chunks/config.js:[2m27177:32[22m[39m
[90m [2mâ¯[22m TransformPluginContext.transform node_modules/vite/dist/node/chunks/config.js:[2m27145:4[22m[39m
[90m [2mâ¯[22m EnvironmentPluginContainer.transform node_modules/vite/dist/node/chunks/config.js:[2m28797:14[22m[39m
[90m [2mâ¯[22m loadAndTransform node_modules/vite/dist/node/chunks/config.js:[2m22670:26[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/2]â¯[22m[39m


[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m13 passed[39m[22m[90m (15)[39m
[2m      Tests [22m [1m[32m55 passed[39m[22m[90m (55)[39m
[2m   Start at [22m 15:40:34
[2m   Duration [22m 11.28s[2m (transform 3.50s, setup 4.91s, import 13.21s, tests 7.40s, environment 35.07s)[22m

